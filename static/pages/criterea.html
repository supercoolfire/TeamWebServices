<!-- Include jQuery -->
<script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>

<table class="rubTab">
  <tbody>
    <tr>
      <td class="rubCol1">Deployed to the Web</td>
      <td class="rubCol2">
        <div class="description rating_description_value">Shows use of Published link CONFIG VARS to connect to MongoDB.
        </div>
      </td>
      <td class="rubCol3"><input id="rubricDeploy" type="checkbox" /> <label for="rubricDeploy">Done</label></td>
    </tr>
    <tr>
      <td class="rubCol1"><span class="outcome_sr_content"><span class="screenreader-only">This criterion is linked to a
            Learning Outcome</span></span><span class="description description_title">OAuth</span></td>
      <td class="rubCol2">
        <div class="rating_long_description small_description">Shows that each protected route (needs authentication)
          requires authentication before access.</div>
      </td>
      <td class="rubCol3"><input id="rubricDeploy" type="checkbox" /> <label for="rubricDeploy">Done</label></td>
    </tr>
    <tr>
      <td class="rubCol1"><span class="outcome_sr_content"><span class="screenreader-only">This criterion is linked to a
            Learning Outcome</span></span><span class="description description_title">HTTP Requests</span></td>
      <td class="rubCol2">
        <div class="rating_long_description small_description">Four collections have a PUT or DELETE request (MongoDB
          change is shown in video).</div>
      </td>
      <td class="rubCol3"><input id="rubricDeploy" type="checkbox" /> <label for="rubricDeploy">Done</label></td>
    </tr>
    <tr>
      <td class="rubCol1">Testing</td>
      <td class="rubCol2"><span class="nobr toggle_for_hide_points"><span class="points">U</span></span>nit tests exist
        and pass for main server.js file and .js files in routes folder.</td>
      <td class="rubCol3"><input id="rubricDeploy" type="checkbox" /> <label for="rubricDeploy">Done</label></td>
    </tr>
    <tr>
      <td class="rubCol1"><span class="outcome_sr_content"><span class="screenreader-only">This criterion is linked to a
            Learning Outcome</span></span><span class="description description_title">Database</span></td>
      <td class="rubCol2"><span class="nobr toggle_for_hide_points"><span class="points">A</span></span>t least one
        collection features documents with at least seven fields.</td>
      <td class="rubCol3"> <input id="rubricDeploy" type="checkbox" /> <label for="rubricDeploy">Done</label></td>
    </tr>
    <tr>
      <td class="rubCol1"><span class="outcome_sr_content"><span class="screenreader-only">This criterion is linked to a
            Learning Outcome</span></span><span class="description description_title">API Documentation</span></td>
      <td class="rubCol2">The documentation can test each endpoint (video should show MongoDB being updated).</td>
      <td class="rubCol3"> <input id="rubricDeploy" type="checkbox" /> <label for="rubricDeploy">Done</label></td>
    </tr>
    <tr>
      <td class="rubCol1">Data Validation</td>
      <td class="rubCol2"><span class="nobr toggle_for_hide_points"><span class="points">E</span></span>ach route has
        data validation, and returns some type of 400 or 500 error if data requirements arenâ€™t met.</td>
      <td class="rubCol3"> <input id="rubricDeploy" type="checkbox" /> <label for="rubricDeploy">Done</label></td>
    </tr>
    <tr>
      <td class="rubCol1">Error Handling</td>
      <td class="rubCol2">
        <div class="rating_long_description small_description">Each route has error handling, and returns some type of
          400 or 500 errors get thrown.</div>
      </td>
      <td class="rubCol3"> <input id="rubricDeploy" type="checkbox" /> <label for="rubricDeploy">Done</label></td>
    </tr>
  </tbody>
</table>

<script>
  $(document).ready(function() {
    // Attach a change event listener to all checkboxes
    $('input[type="checkbox"]').on('change', function() {
      // Get the ID of the checkbox
      const checkboxId = $(this).attr('id');

      // Send an AJAX request to update the criteria in MongoDB
      $.ajax({
        type: 'POST',
        url: '/update-criteria',
        data: { checkboxId: checkboxId },
        success: function(response) {
          console.log('Criteria updated successfully:', response);
        },
        error: function(error) {
          console.error('Error updating criteria:', error);
        }
      });
    });
  });
</script>